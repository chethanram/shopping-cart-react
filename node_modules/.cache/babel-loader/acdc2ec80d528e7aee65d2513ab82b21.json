{"ast":null,"code":"import _classCallCheck from \"/workspace/shopping-cart-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/workspace/shopping-cart-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/workspace/shopping-cart-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/workspace/shopping-cart-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/workspace/shopping-cart-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/workspace/shopping-cart-react/src/components/Shelf/index.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { fetchProducts } from '../../services/shelf/actions';\nimport Spinner from '../Spinner';\nimport ShelfHeader from './ShelfHeader';\nimport ProductList from './ProductList';\nimport './style.scss';\n\nvar Shelf =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Shelf, _Component);\n\n  function Shelf() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Shelf);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Shelf)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isLoading: false\n    };\n\n    _this.handleFetchProducts = function () {\n      var filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.props.filters;\n      var sort = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.props.sort;\n      var search = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this.props.search;\n\n      _this.setState({\n        isLoading: true\n      });\n\n      _this.props.fetchProducts(filters, sort, search, function () {\n        _this.setState({\n          isLoading: false\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Shelf, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.handleFetchProducts();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var nextFilters = nextProps.filters,\n          nextSort = nextProps.sort,\n          nextSearch = nextProps.search;\n      var filters = this.props.filters;\n\n      if (nextFilters.length !== filters.length) {\n        this.handleFetchProducts(nextFilters, undefined);\n      }\n\n      if (nextSort !== this.props.sort) {\n        this.handleFetchProducts(undefined, nextSort);\n      }\n\n      if (nextSearch !== this.props.nextSearch) {\n        this.handleFetchProducts(undefined, nextSearch);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var products = this.props.products;\n      var isLoading = this.state.isLoading;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, isLoading && React.createElement(Spinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"shelf-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(ShelfHeader, {\n        productsLength: products.length,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }), React.createElement(ProductList, {\n        products: products,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Shelf;\n}(Component);\n\nShelf.propTypes = {\n  fetchProducts: PropTypes.func.isRequired,\n  products: PropTypes.array.isRequired,\n  filters: PropTypes.number,\n  sort: PropTypes.string,\n  search: PropTypes.string\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    products: state.shelf.products,\n    filters: state.filters.items,\n    sort: state.sort.type\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchProducts: fetchProducts\n})(Shelf);","map":{"version":3,"sources":["/workspace/shopping-cart-react/src/components/Shelf/index.js"],"names":["React","Component","PropTypes","connect","fetchProducts","Spinner","ShelfHeader","ProductList","Shelf","state","isLoading","handleFetchProducts","filters","props","sort","search","setState","nextProps","nextFilters","nextSort","nextSearch","length","undefined","products","propTypes","func","isRequired","array","number","string","mapStateToProps","shelf","items","type"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport { fetchProducts } from '../../services/shelf/actions';\n\nimport Spinner from '../Spinner';\nimport ShelfHeader from './ShelfHeader';\nimport ProductList from './ProductList';\n\nimport './style.scss';\n\nclass Shelf extends Component {\n  static propTypes = {\n    fetchProducts: PropTypes.func.isRequired,\n    products: PropTypes.array.isRequired,\n    filters: PropTypes.number,\n    sort: PropTypes.string,\n    search: PropTypes.string\n  };\n\n  state = {\n    isLoading: false\n  };\n\n  componentDidMount() {\n    this.handleFetchProducts();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { filters: nextFilters, sort: nextSort , search: nextSearch} = nextProps;\n    const { filters } = this.props;\n    if (nextFilters.length !== filters.length) {\n      this.handleFetchProducts(nextFilters, undefined);\n    }\n\n    if (nextSort !== this.props.sort) {\n      this.handleFetchProducts(undefined, nextSort);\n    }\n\n    if(nextSearch !== this.props.nextSearch){\n        this.handleFetchProducts(undefined, nextSearch);\n    }\n  }\n\n  handleFetchProducts = (\n    filters = this.props.filters,\n    sort = this.props.sort,\n    search = this.props.search\n  ) => {\n    this.setState({ isLoading: true });\n    this.props.fetchProducts(filters, sort, search, () => {\n      this.setState({ isLoading: false });\n    });\n  };\n\n  render() {\n    const { products } = this.props;\n    const { isLoading } = this.state;\n\n    return (\n      <React.Fragment>\n        {isLoading && <Spinner />}\n        <div className=\"shelf-container\">\n          <ShelfHeader productsLength={products.length} />\n          <ProductList products={products} />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  products: state.shelf.products,\n  filters: state.filters.items,\n  sort: state.sort.type\n});\n\nexport default connect(\n  mapStateToProps,\n  { fetchProducts }\n)(Shelf);\n"]},"metadata":{},"sourceType":"module"}